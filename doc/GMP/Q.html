<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=UTF-8" />
<title>Class: GMP::Q</title>
<link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/app.js"></script>

  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (Q)</a> &raquo; 
    <a href="../GMP.html" title="GMP">GMP</a>
     &raquo; 
    <span class="title">Q</span>
  
</div>

      <div id="search">
  <a id="class_list_link" href="#">Namespace List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: GMP::Q 
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Numeric</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Numeric</li>
          
            <li class="next">GMP::Q</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">ext/gmp.c<span class="defines">,<br />
  ext/gmpq.c</span>
</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>
GMP Multiple Precision Rational Number.
</p>
<p>
Instances of this class can store variables of the type mpq_t. This class
also contains many methods that act as the functions for mpq_t variables,
as well as a few methods that attempt to make this library more Ruby-ish.
</p>
<p>
The following list is just a simple checklist for me, really. A better
reference should be found in the rdocs.
</p>
<pre class="code">
  <span class='Ruby constant id'>Ruby</span> <span class='method identifier id'>method</span>  <span class='C constant id'>C</span> <span class='Extension constant id'>Extension</span> <span class='function identifier id'>function</span>  <span class='GMP constant id'>GMP</span> <span class='function identifier id'>function</span>
  <span class='to_d identifier id'>to_d</span>         <span class='r_gmpq_to_d identifier id'>r_gmpq_to_d</span>           <span class='mpq_get_d identifier id'>mpq_get_d</span>
  <span class='to_s identifier id'>to_s</span>         <span class='r_gmpq_to_s identifier id'>r_gmpq_to_s</span>           <span class='question op'>?</span>
  <span class='add identifier id'>add</span>          <span class='r_gmpq_add identifier id'>r_gmpq_add</span>            <span class='mpq_add identifier id'>mpq_add</span>
  <span class='sub identifier id'>sub</span>          <span class='r_gmpq_sub identifier id'>r_gmpq_sub</span>            <span class='mpq_sub identifier id'>mpq_sub</span>
  <span class='mul identifier id'>mul</span>          <span class='r_gmpq_mul identifier id'>r_gmpq_mul</span>            <span class='mpq_mul identifier id'>mpq_mul</span>
  <span class='div identifier id'>div</span>          <span class='r_gmpq_div identifier id'>r_gmpq_div</span>            <span class='mpq_div identifier id'>mpq_div</span>
  <span class='minus op'>-</span>@           <span class='r_gmpq_neg identifier id'>r_gmpq_neg</span>            <span class='mpq_neg identifier id'>mpq_neg</span>
  <span class='neg identifier id'>neg</span>          <span class='r_gmpq_neg identifier id'>r_gmpq_neg</span>            <span class='mpq_neg identifier id'>mpq_neg</span>
  <span class='neg! fid id'>neg!</span>         <span class='r_gmpq_neg_self identifier id'>r_gmpq_neg_self</span>       <span class='mpq_neg identifier id'>mpq_neg</span>
  <span class='abs identifier id'>abs</span>          <span class='r_gmpq_abs identifier id'>r_gmpq_abs</span>            <span class='mpq_abs identifier id'>mpq_abs</span>
  <span class='abs! fid id'>abs!</span>         <span class='r_gmpq_abs_self identifier id'>r_gmpq_abs_self</span>       <span class='mpq_abs identifier id'>mpq_abs</span>
</pre>


  </div>
</div>
<div class="tags">
  
</div>

  

  <h2>Class Method Summary</h2>

  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#GMP%3A%3AQ.new-class_method" title="GMP::Q.new (class method)">+ (Object) <strong>GMP::Q.new</strong>(arg) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc">
Creates a new GMP::Q rational, with arg as its value, converting where
necessary.

</span>
  
</li>

    
  </ul>

  <h2>Instance Method Summary</h2>

  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#%2A-instance_method" title="#* (instance method)">- (Object) <strong>*</strong>(rat2) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc">
Multiplies <tt>rat1</tt> with <tt>rat2</tt>.

</span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#%2B-instance_method" title="#+ (instance method)">- (Object) <strong>+</strong>(rat2) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc">
Adds <tt>rat1</tt> to <tt>rat2</tt>.

</span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#--instance_method" title="#- (instance method)">- (Object) <strong>-</strong>(rat2) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc">
Subtracts <tt>rat2</tt> from <tt>rat1</tt>.

</span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#-%40-instance_method" title="#-@ (instance method)">- (Object) <strong>-@</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc">
call-seq:.

</span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#%2F-instance_method" title="#/ (instance method)">- (Object) <strong>/</strong>(rat2) </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc">
Divides <tt>rat1</tt> by <tt>rat2</tt>.

</span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#%3C-instance_method" title="#&lt; (instance method)">- (Object) <strong>&lt;</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#%3C%3D-instance_method" title="#&lt;= (instance method)">- (Object) <strong>&lt;=</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#%3C%3D%3E-instance_method" title="#&lt;=&gt; (instance method)">- (Object) <strong>&lt;=&gt;</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#%3D%3D-instance_method" title="#== (instance method)">- (Object) <strong>==</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#%3E-instance_method" title="#&gt; (instance method)">- (Object) <strong>&gt;</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#%3E%3D-instance_method" title="#&gt;= (instance method)">- (Object) <strong>&gt;=</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#abs-instance_method" title="#abs (instance method)">- (Object) <strong>abs</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc">
call-seq:.

</span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#abs%21-instance_method" title="#abs! (instance method)">- (Object) <strong>abs!</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc">
call-seq:.

</span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#ceil-instance_method" title="#ceil (instance method)">- (Object) <strong>ceil</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#cmpabs-instance_method" title="#cmpabs (instance method)">- (Object) <strong>cmpabs</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#coerce-instance_method" title="#coerce (instance method)">- (Object) <strong>coerce</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#den-instance_method" title="#den (instance method)">- (Object) <strong>den</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#floor-instance_method" title="#floor (instance method)">- (Object) <strong>floor</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Object) <strong>initialize</strong> </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  

  
    <span class="summary_desc"></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#inv-instance_method" title="#inv (instance method)">- (Object) <strong>inv</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#inv%21-instance_method" title="#inv! (instance method)">- (Object) <strong>inv!</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#neg%21-instance_method" title="#neg! (instance method)">- (Object) <strong>neg!</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc">
call-seq:.

</span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#num-instance_method" title="#num (instance method)">- (Object) <strong>num</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#sgn-instance_method" title="#sgn (instance method)">- (Object) <strong>sgn</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc">
From the GMP Manual:.

</span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#rat2-instance_method" title="#rat2 (instance method)">- (Object) <strong>rat2</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc">
Efficiently swaps the contents of <tt>rat1</tt> with <tt>rat2</tt>.

</span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_d-instance_method" title="#to_d (instance method)">- (Object) <strong>to_d</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc">
Returns <tt>rational</tt> as an Float if <tt>rational</tt> fits in a Float.

</span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_s-instance_method" title="#to_s (instance method)">- (Object) <strong>to_s</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc">
call-seq:.

</span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#trunc-instance_method" title="#trunc (instance method)">- (Object) <strong>trunc</strong> </a>
    

    
  </span>
  
  
  
  
  

  
    <span class="summary_desc"></span>
  
</li>

    
  </ul>

  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt>Object</tt>) <strong>initialize</strong> 
  

  
</p>
</div>
  
</div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="new-class_method">
  
    + (<tt>Object</tt>) <strong>GMP::Q.new</strong>(arg) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Creates a new GMP::Q rational, with arg as its value, converting where
necessary.
</p>


  </div>
</div>
<div class="tags">
  
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/gmpq.c'</span>

/*
 * call-seq:
 *   GMP::Q.new(arg)
 *
 * Creates a new GMP::Q rational, with arg as its value, converting where
 * necessary.
 */
VALUE r_gmpqsg_new(int argc, VALUE *argv, VALUE klass)
{
  MP_RAT *res_val;
  VALUE res;

  (void)klass;

  if (argc &gt; 2)
    rb_raise(rb_eArgError, &quot;wrong # of arguments(%d for 0, 1 or 2)&quot;, argc);

  mpq_make_struct (res, res_val);
  mpq_init (res_val);
  rb_obj_call_init(res, argc, argv);
 
  return res;
}</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="*-instance_method">
  
    - (<tt>Object</tt>) <strong>*</strong>(rat2) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Multiplies <tt>rat1</tt> with <tt>rat2</tt>. <tt>rat2</tt> can be
</p>
<ul>
<li>GMP::Z

</li>
<li>Fixnum

</li>
<li>GMP::Q

</li>
<li>GMP::F

</li>
<li>Bignum

</li>
</ul>


  </div>
</div>
<div class="tags">
  
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/gmpq.c'</span>

/*
 * call-seq:
 *   rat1 * rat2
 *
 * Multiplies +rat1+ with +rat2+. +rat2+ can be
 * * GMP::Z
 * * Fixnum
 * * GMP::Q
 * * GMP::F
 * * Bignum
 */
VALUE r_gmpq_mul(VALUE self, VALUE arg)
{
  MP_RAT *self_val, *arg_val_q, *res_val;
  MP_INT *arg_val_z, *tmp_z;
  VALUE res;
#if GMP &gt;= 4
  unsigned long tmp_ui;
#endif

  mpq_get_struct(self, self_val);
  mpq_make_struct_init(res, res_val);

  if (GMPQ_P(arg)) {
    mpq_get_struct(arg,arg_val_q);
    mpq_mul(res_val, self_val, arg_val_q);
  } else if (GMPZ_P(arg)) {
    mpz_get_struct(arg,arg_val_z);
    mpz_temp_init(tmp_z);
    mpz_gcd(tmp_z, mpq_denref(self_val), arg_val_z);
    mpz_divexact(mpq_denref(res_val), mpq_denref(self_val), tmp_z);
    mpz_divexact(mpq_numref(res_val), arg_val_z, tmp_z);
    mpz_mul(mpq_numref(res_val), mpq_numref(res_val), mpq_numref(self_val));
    mpz_temp_free(tmp_z);
  } else if (FIXNUM_P(arg)) {
#if GMP &gt;= 4
    if (FIX2INT(arg) &gt; 0) {
      tmp_ui = mpz_gcd_ui(0, mpq_denref(self_val), FIX2INT(arg));
    } else if (FIX2INT(arg) &lt; 0) {
      tmp_ui = mpz_gcd_ui(0, mpq_denref(self_val), -FIX2INT(arg));
    } else {
      mpz_set_ui(mpq_numref(res_val), 0);
      mpz_set_ui(mpq_denref(res_val), 1);
      return res;
    }
    mpz_divexact_ui(mpq_denref(res_val), mpq_denref(self_val), tmp_ui);
    mpz_mul_ui(mpq_numref(res_val), mpq_numref(self_val), FIX2INT(arg)/tmp_ui);
#else
    mpz_set(mpq_denref(res_val), mpq_denref(self_val));
    mpz_mul_si(mpq_numref(res_val), mpq_numref(self_val), FIX2INT(arg));
    mpq_canonicalize(res_val);
#endif
  } else if (GMPF_P(arg)) {
    return r_gmpf_mul(arg, self);
  } else if (BIGNUM_P(arg)) {
    mpz_temp_alloc(tmp_z);
    mpz_set_bignum(tmp_z, arg);
    mpz_gcd(mpq_denref(res_val), mpq_denref(self_val), tmp_z);
    mpz_divexact(mpq_numref(res_val), tmp_z, mpq_denref(res_val));
    mpz_divexact(mpq_denref(res_val), mpq_denref(self_val), mpq_denref(res_val));
    mpz_mul(mpq_numref(res_val), mpq_numref(res_val), mpq_numref(self_val));
    mpz_temp_free(tmp_z);
  } else {
    typeerror(ZQFXB);
  }
  return res;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="+-instance_method">
  
    - (<tt>Object</tt>) <strong>+</strong>(rat2) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Adds <tt>rat1</tt> to <tt>rat2</tt>. <tt>rat2</tt> can be
</p>
<ul>
<li>GMP::Z

</li>
<li>Fixnum

</li>
<li>GMP::Q

</li>
<li>GMP::F

</li>
<li>Bignum

</li>
</ul>


  </div>
</div>
<div class="tags">
  
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/gmpq.c'</span>

/*
 * call-seq:
 *   rat1 + rat2
 *
 * Adds +rat1+ to +rat2+. +rat2+ can be
 * * GMP::Z
 * * Fixnum
 * * GMP::Q
 * * GMP::F
 * * Bignum
 */
VALUE r_gmpq_add(VALUE self, VALUE arg)
{
  MP_RAT *self_val, *arg_val_q, *res_val;
  MP_INT *arg_val_z, *res_val_num;
  VALUE res;

  mpq_get_struct(self, self_val);
  mpq_make_struct_init(res, res_val);

  if (GMPQ_P(arg)) {
    mpq_get_struct(arg,arg_val_q);
    mpq_add(res_val, self_val, arg_val_q);
  } else if (GMPZ_P(arg)) {
    res_val_num = mpq_numref(res_val);
    mpz_set(mpq_denref(res_val), mpq_denref(self_val));
    mpz_get_struct(arg, arg_val_z);
    mpz_mul(res_val_num, mpq_denref(self_val), arg_val_z);
    mpz_add(res_val_num, res_val_num, mpq_numref(self_val));
  } else if (FIXNUM_P(arg)) {
    res_val_num = mpq_numref(res_val);
    mpz_set(mpq_denref(res_val), mpq_denref(self_val));
    mpz_mul_si(res_val_num, mpq_denref(self_val), FIX2INT(arg));
    mpz_add(res_val_num, res_val_num, mpq_numref(self_val));
  } else if (GMPF_P(arg)) {
    return r_gmpf_add(arg,self);
  } else if (BIGNUM_P(arg)) {
    res_val_num = mpq_numref(res_val);
    mpz_set(mpq_denref(res_val), mpq_denref(self_val));
    mpz_set_bignum(res_val_num, arg);
    mpz_mul(res_val_num, res_val_num, mpq_denref(self_val));
    mpz_add(res_val_num, res_val_num, mpq_numref(self_val));
  } else {
    typeerror(ZQFXB);
  }
  return res;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="--instance_method">
  
    - (<tt>Object</tt>) <strong>-</strong>(rat2) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Subtracts <tt>rat2</tt> from <tt>rat1</tt>. <tt>rat2</tt> can be
</p>
<ul>
<li>GMP::Z

</li>
<li>Fixnum

</li>
<li>GMP::Q

</li>
<li>GMP::F

</li>
<li>Bignum

</li>
</ul>


  </div>
</div>
<div class="tags">
  
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/gmpq.c'</span>

/*
 * call-seq:
 *   rat1 - rat2
 *
 * Subtracts +rat2+ from +rat1+. +rat2+ can be
 * * GMP::Z
 * * Fixnum
 * * GMP::Q
 * * GMP::F
 * * Bignum
 */
VALUE r_gmpq_sub(VALUE self, VALUE arg)
{
  MP_RAT *self_val, *arg_val_q, *res_val;
  MP_INT *arg_val_z, *res_val_num;
  MP_FLOAT *arg_val_f, *res_val_f;
  VALUE res;
  unsigned int prec;

  mpq_get_struct(self, self_val);
  mpq_make_struct_init(res, res_val);

  if (GMPQ_P(arg)) {
    mpq_get_struct(arg,arg_val_q);
    mpq_sub (res_val, self_val, arg_val_q);
  } else if (GMPZ_P(arg)) {
    res_val_num = mpq_numref(res_val);
    mpz_set (mpq_denref(res_val), mpq_denref(self_val));
    mpz_get_struct(arg, arg_val_z);
    mpz_mul (res_val_num, mpq_denref(self_val), arg_val_z);
    mpz_neg (res_val_num, res_val_num);
    mpz_add (res_val_num, res_val_num, mpq_numref(self_val));
  } else if (FIXNUM_P(arg)) {
    res_val_num = mpq_numref(res_val);
    mpz_set (mpq_denref(res_val), mpq_denref(self_val));
    mpz_mul_si (res_val_num, mpq_denref(self_val), -FIX2INT(arg));
    mpz_add (res_val_num, res_val_num, mpq_numref(self_val));
  } else if (GMPF_P(arg)) {
    mpf_get_struct_prec (arg, arg_val_f, prec);
    mpf_make_struct_init(res, res_val_f, prec);
    mpf_set_q (res_val_f, self_val);
    mpf_sub (res_val_f, res_val_f, arg_val_f);
  } else if (BIGNUM_P(arg)) {
    res_val_num = mpq_numref(res_val);
    mpz_set (mpq_denref(res_val), mpq_denref(self_val));
    mpz_set_bignum (res_val_num, arg);
    mpz_mul (res_val_num, res_val_num, mpq_denref(self_val));
    mpz_neg (res_val_num, res_val_num);
    mpz_add (res_val_num, res_val_num, mpq_numref(self_val));
  } else {
    typeerror (ZQFXB);
  }
  return res;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="-@-instance_method">
  
    - (<tt>Object</tt>) <strong>-@</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
call-seq:
</p>
<pre class="code">
  <span class='minus op'>-</span><span class='rational identifier id'>rational</span>
  <span class='rational identifier id'>rational</span><span class='dot token'>.</span><span class='neg identifier id'>neg</span>
</pre>
<p>
From the GMP Manual:
</p>
<p>
Returns -<tt>rational</tt>.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/gmpq.c'</span>

/*
 * Document-method: neg
 *
 * call-seq:
 *   -rational
 *   rational.neg
 *
 * From the GMP Manual:
 * 
 * Returns -+rational+.
 */
VALUE r_gmpq_neg(VALUE self)
{
  MP_RAT *self_val, *res_val;
  VALUE res;
  mpq_get_struct(self, self_val);
  mpq_make_struct_init(res, res_val);
  mpq_neg (res_val, self_val);
  return res;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="/-instance_method">
  
    - (<tt>Object</tt>) <strong>/</strong>(rat2) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Divides <tt>rat1</tt> by <tt>rat2</tt>. <tt>rat2</tt> can be
</p>
<ul>
<li>GMP::Z

</li>
<li>Fixnum

</li>
<li>GMP::Q

</li>
<li>GMP::F

</li>
<li>Bignum

</li>
</ul>


  </div>
</div>
<div class="tags">
  
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/gmpq.c'</span>

/*
 * call-seq:
 *   rat1 / rat2
 *
 * Divides +rat1+ by +rat2+. +rat2+ can be
 * * GMP::Z
 * * Fixnum
 * * GMP::Q
 * * GMP::F
 * * Bignum
 */
VALUE r_gmpq_div(VALUE self, VALUE arg)
{
  MP_RAT *self_val, *arg_val_q, *res_val;
  MP_INT *arg_val_z, *tmp_z;
  MP_FLOAT *arg_val_f, *res_val_f;
  VALUE res;
  unsigned long tmp_ui, prec;

  mpq_get_struct(self, self_val);
  mpq_make_struct_init(res, res_val);

  if (GMPQ_P(arg)) {
    mpq_get_struct(arg,arg_val_q);
    if (mpz_sgn(mpq_numref(arg_val_q)) == 0)
      rb_raise(rb_eZeroDivError, &quot;divided by 0&quot;);
    mpq_div(res_val, self_val, arg_val_q);
  } else if (GMPZ_P(arg)) {
    mpz_get_struct(arg,arg_val_z);
    mpz_temp_init(tmp_z);
    mpz_gcd(tmp_z, mpq_numref(self_val), arg_val_z);
    mpz_divexact(mpq_numref(res_val), mpq_numref(self_val), tmp_z);
    mpz_divexact(mpq_denref(res_val), arg_val_z, tmp_z);
    mpz_mul(mpq_denref(res_val), mpq_denref(res_val), mpq_denref(self_val));
    mpz_temp_free(tmp_z);
  } else if (FIXNUM_P(arg)) {
    if (FIX2INT(arg) == 0)
      rb_raise(rb_eZeroDivError, &quot;divided by 0&quot;);
    if (FIX2INT(arg) &gt; 0) {
      tmp_ui = mpz_gcd_ui(0, mpq_numref(self_val), FIX2INT(arg));
    } else {
      tmp_ui = mpz_gcd_ui(0, mpq_numref(self_val), -FIX2INT(arg));
    }
    mpz_divexact_ui(mpq_numref(res_val), mpq_numref(self_val), tmp_ui);
    mpz_mul_ui(mpq_denref(res_val), mpq_denref(self_val), FIX2INT(arg)/tmp_ui);
  } else if (GMPF_P(arg)) {
    mpf_get_struct_prec(arg, arg_val_f, prec);
    mpf_make_struct_init(res, res_val_f, prec);
    mpf_set_q(res_val_f, self_val);
    mpf_div(res_val_f, res_val_f, arg_val_f);
  } else if (BIGNUM_P(arg)) {
    mpz_temp_alloc(tmp_z);
    mpz_set_bignum(tmp_z, arg);
    mpz_gcd(mpq_numref(res_val), mpq_numref(self_val), tmp_z);
    mpz_divexact(mpq_denref(res_val), tmp_z, mpq_numref(res_val));
    mpz_divexact(mpq_numref(res_val), mpq_numref(self_val), mpq_numref(res_val));
    mpz_mul(mpq_denref(res_val), mpq_denref(res_val), mpq_denref(self_val));
    mpz_temp_free(tmp_z);
  } else {
    typeerror(ZQFXB);
  }
  return res;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="<-instance_method">
  
    - (<tt>Object</tt>) <strong>&lt;</strong> 
  

  
</p>
</div>
    
      <div class="method_details ">
  <p class="signature " id="<=-instance_method">
  
    - (<tt>Object</tt>) <strong>&lt;=</strong> 
  

  
</p>
</div>
    
      <div class="method_details ">
  <p class="signature " id="<=>-instance_method">
  
    - (<tt>Object</tt>) <strong>&lt;=&gt;</strong> 
  

  
</p>
</div>
    
      <div class="method_details ">
  <p class="signature " id="==-instance_method">
  
    - (<tt>Object</tt>) <strong>==</strong> 
  

  
</p>
</div>
    
      <div class="method_details ">
  <p class="signature " id=">-instance_method">
  
    - (<tt>Object</tt>) <strong>&gt;</strong> 
  

  
</p>
</div>
    
      <div class="method_details ">
  <p class="signature " id=">=-instance_method">
  
    - (<tt>Object</tt>) <strong>&gt;=</strong> 
  

  
</p>
</div>
    
      <div class="method_details ">
  <p class="signature " id="abs-instance_method">
  
    - (<tt>Object</tt>) <strong>abs</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
call-seq:
</p>
<pre class="code">
  <span class='rational identifier id'>rational</span><span class='dot token'>.</span><span class='abs identifier id'>abs</span>
</pre>
<p>
From the GMP Manual:
</p>
<p>
Returns the absolute value of <tt>rational</tt>.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/gmpq.c'</span>

/*
 * Document-method: abs
 *
 * call-seq:
 *   rational.abs
 *
 * From the GMP Manual:
 * 
 * Returns the absolute value of +rational+.
 */
VALUE r_gmpq_abs(VALUE self)
{
  MP_RAT *self_val, *res_val;
  VALUE res;
  mpq_get_struct(self, self_val);
  mpq_make_struct_init(res, res_val);
  mpz_abs (mpq_numref(res_val), mpq_numref(self_val));
  mpz_set (mpq_denref(res_val), mpq_denref(self_val));

  return res;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="abs!-instance_method">
  
    - (<tt>Object</tt>) <strong>abs!</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
call-seq:
</p>
<pre class="code">
  <span class='rational identifier id'>rational</span><span class='dot token'>.</span><span class='abs! fid id'>abs!</span>
</pre>
<p>
From the GMP Manual:
</p>
<p>
Sets <tt>rational</tt> to its absolute value.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/gmpq.c'</span>

/*
 * Document-method: abs!
 *
 * call-seq:
 *   rational.abs!
 *
 * From the GMP Manual:
 * 
 * Sets +rational+ to its absolute value.
 */
VALUE r_gmpq_abs_self(VALUE self)
{
  MP_RAT *self_val;
  mpq_get_struct(self, self_val);
  mpz_abs (mpq_numref(self_val), mpq_numref(self_val));
  return Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="ceil-instance_method">
  
    - (<tt>Object</tt>) <strong>ceil</strong> 
  

  
</p>
</div>
    
      <div class="method_details ">
  <p class="signature " id="cmpabs-instance_method">
  
    - (<tt>Object</tt>) <strong>cmpabs</strong> 
  

  
</p>
</div>
    
      <div class="method_details ">
  <p class="signature " id="coerce-instance_method">
  
    - (<tt>Object</tt>) <strong>coerce</strong> 
  

  
</p>
</div>
    
      <div class="method_details ">
  <p class="signature " id="den-instance_method">
  
    - (<tt>Object</tt>) <strong>den</strong> 
  

  
</p>
</div>
    
      <div class="method_details ">
  <p class="signature " id="floor-instance_method">
  
    - (<tt>Object</tt>) <strong>floor</strong> 
  

  
</p>
</div>
    
      <div class="method_details ">
  <p class="signature " id="inv-instance_method">
  
    - (<tt>Object</tt>) <strong>inv</strong> 
  

  
</p>
</div>
    
      <div class="method_details ">
  <p class="signature " id="inv!-instance_method">
  
    - (<tt>Object</tt>) <strong>inv!</strong> 
  

  
</p>
</div>
    
      <div class="method_details ">
  <p class="signature " id="neg!-instance_method">
  
    - (<tt>Object</tt>) <strong>neg!</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
call-seq:
</p>
<pre class="code">
  <span class='rational identifier id'>rational</span><span class='dot token'>.</span><span class='neg! fid id'>neg!</span>
</pre>
<p>
From the GMP Manual:
</p>
<p>
Sets <tt>rational</tt> to -<tt>rational</tt>.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/gmpq.c'</span>

/*
 * Document-method: neg!
 *
 * call-seq:
 *   rational.neg!
 *
 * From the GMP Manual:
 * 
 * Sets +rational+ to -+rational+.
 */
VALUE r_gmpq_neg_self(VALUE self)
{
  MP_RAT *self_val;
  mpq_get_struct(self, self_val);
  mpz_neg (mpq_numref(self_val), mpq_numref(self_val));
  return Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="num-instance_method">
  
    - (<tt>Object</tt>) <strong>num</strong> 
  

  
</p>
</div>
    
      <div class="method_details ">
  <p class="signature " id="sgn-instance_method">
  
    - (<tt>Object</tt>) <strong>sgn</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
From the GMP Manual:
</p>
<p>
Returns <tt>1 if </tt>rational+ &gt; 0, 0 if <tt>rational</tt> == 0, and -1
if <tt>rational</tt> &lt; 0.
</p>


  </div>
</div>
<div class="tags">
  
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/gmpq.c'</span>

/*
 * call-seq:
 *   rational.sgn
 *
 * From the GMP Manual:
 * 
 * Returns +1 if +rational+ &gt; 0, 0 if +rational+ == 0, and -1 if +rational+ &lt; 0.
 */
VALUE r_gmpq_sgn(VALUE self)
{
  MP_RAT *self_val;
  mpq_get_struct(self, self_val);
  return INT2FIX(mpq_sgn(self_val));
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="swap-instance_method">
  
    - (<tt>Object</tt>) <strong>rat2</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Efficiently swaps the contents of <tt>rat1</tt> with <tt>rat2</tt>.
</p>


  </div>
</div>
<div class="tags">
  
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/gmpq.c'</span>

/*
 * call-seq:
 *   rat1.swap rat2
 *
 * Efficiently swaps the contents of +rat1+ with +rat2+.
 */
VALUE r_gmpq_swap(VALUE self, VALUE arg)
{
  MP_RAT *self_val, *arg_val;

  if (!GMPQ_P(arg)) {
    rb_raise(rb_eTypeError, &quot;Can't swap GMP::Q with object of other class&quot;);
  }

  mpq_get_struct(self, self_val);
  mpq_get_struct(arg, arg_val);
  mpq_swap(self_val,arg_val);

  return Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="to_d-instance_method">
  
    - (<tt>Object</tt>) <strong>to_d</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns <tt>rational</tt> as an Float if <tt>rational</tt> fits in a Float.
</p>
<p>
Otherwise returns the least significant part of <tt>rational</tt>, with the
same sign as <tt>rational</tt>.
</p>
<p>
If the exponent from the conversion is too big or too small to fit a double
then the result is system dependent. For too big an infinity is returned
when available. For too small 0.0 is normally returned. Hardware overflow,
underflow and denorm traps may or may not occur.
</p>


  </div>
</div>
<div class="tags">
  
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/gmpq.c'</span>

/*
 * call-seq:
 *   rational.to_d
 *
 * Returns +rational+ as an Float if +rational+ fits in a Float.
 *
 * Otherwise returns the least significant part of +rational+, with the same
 * sign as +rational+.
 *
 * If the exponent from the conversion is too big or too small to fit a double
 * then the result is system dependent. For too big an infinity is returned
 * when available. For too small 0.0 is normally returned. Hardware overflow,
 * underflow and denorm traps may or may not occur. 
 */
VALUE r_gmpq_to_d(VALUE self)
{
  MP_RAT *self_val;
  mpq_get_struct(self, self_val);

  return rb_float_new(mpq_get_d(self_val));
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="to_s-instance_method">
  
    - (<tt>Object</tt>) <strong>to_s</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
call-seq:
</p>
<pre class="code">
  <span class='rational identifier id'>rational</span><span class='dot token'>.</span><span class='to_s identifier id'>to_s</span>
</pre>
<p>
Returns the decimal representation of <tt>rational</tt>, as a Ruby string.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/gmpq.c'</span>

/*
 * Document-method: to_s
 *
 * call-seq:
 *   rational.to_s
 *
 * Returns the decimal representation of +rational+, as a Ruby string.
 */
VALUE r_gmpq_to_s(VALUE self)
{
  MP_RAT *self_val;
  MP_INT *self_val_num, *self_val_den;
  char *str;
  VALUE res;
  int sizeinbase;
  int offset;

  Data_Get_Struct(self, MP_RAT, self_val);

  if (mpz_cmp_ui(mpq_denref(self_val), 1) == 0) {
    str = mpz_get_str(NULL, 10, mpq_numref (self_val));
    res = rb_str_new2(str);
    free (str);
    return res;
  }

  self_val_num = mpq_numref(self_val);
  self_val_den = mpq_denref(self_val);

  sizeinbase = mpz_sizeinbase (self_val_num, 10) + mpz_sizeinbase (self_val_den, 10) + 3;
  str = malloc (sizeinbase);

  mpz_get_str (str, 10, self_val_num);
  offset = strlen (str);
  str[offset] = '/';
  mpz_get_str (str + offset + 1, 10, self_val_den);
  res = rb_str_new2(str);
  free (str);

  return res;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="trunc-instance_method">
  
    - (<tt>Object</tt>) <strong>trunc</strong> 
  

  
</p>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on 12/22/09 14:40:06 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool">yard</a>
  0.5.2 (ruby-1.8.6).
</div>

  </body>
</html>